{% extends "lms_custom/templates/base.html" %}

{% block title %}Home | {{ brand_name or "Learning" }}{% endblock %}

{% block head_include %}
	<script
		id="www-widgetapi-script"
		src="https://s.ytimg.com/yts/jsbin/www-widgetapi-vflS50iB-/www-widgetapi.js"
		async=""
	></script>
	<script src="https://www.youtube.com/player_api"></script>
	<link rel="stylesheet preload" as="style" href="/assets/lms_custom/css/preload.min.css" />
	<link rel="stylesheet preload" as="style" href="/assets/lms_custom/css/icomoon.css" />
	<link
		rel="stylesheet preload"
		as="style"
		href="/assets/lms_custom/css/bootstrap-utilities.css"
	/>
	<link rel="stylesheet" href="/assets/lms_custom/css/index.min.css" />
{% endblock %}

{% block content %}
		<!-- homepage content start -->
		<main>
			<!-- hero section start -->
			<div class="underlay"></div>
			<section class="hero">
				<div class="container d-lg-flex align-items-center">
					<div class="hero_content">
						<h1 class="hero_content-header" data-aos="fade-up">
							Large educational programs
						</h1>
						<div
							class="hero_content-rating d-flex flex-column flex-sm-row align-items-center"
						>
							<p class="text" data-aos="fade-left">
								Our course is rated excellent by over 42,000 people
							</p>
							<div class="wrapper" data-aos="fade-left" data-aos-delay="50">
								<ul class="rating d-flex align-items-center">
									<li class="rating_star">
										<i class="icon-star icon"></i>
									</li>
									<li class="rating_star">
										<i class="icon-star icon"></i>
									</li>
									<li class="rating_star">
										<i class="icon-star icon"></i>
									</li>
									<li class="rating_star">
										<i class="icon-star icon"></i>
									</li>
									<li class="rating_star">
										<i class="icon-star icon"></i>
									</li>
								</ul>
							</div>
						</div>
						<p class="hero_content-text" data-aos="fade-up" data-aos-delay="50">
							Today, more than 48,000 people have already studied at our university
							in various fields: programming, photography, marketing and management
						</p>
						<div class="hero_content-action d-flex flex-wrap">
							<a class="btn btn--gradient" href="#" data-aos="fade-left">
								<span class="text">Try for Free</span>
							</a>
							<a
								class="btn btn--highlight"
								href="pricing.html"
								data-aos="fade-left"
								data-aos-delay="50"
							>
								<span class="text">See Pricing Plans</span>
							</a>
						</div>
					</div>
					<div class="hero_media col-lg-6">
						<lottie-player
							src="/assets/lms_custom/lottie/hero.json"
							background="transparent"
							speed="1"
							style="width: 100%; height: 100%"
							loop
							autoplay
						></lottie-player>
					</div>
				</div>
			</section>
			<!-- hero section end -->
			<!-- features section start -->
			<div class="features">
				<div class="container">
					<ul class="features_list d-md-flex flex-wrap">
						<li class="features_list-item col-md-4" data-order="1" data-aos="fade-up">
							<div class="card">
								<div class="content">
									<div class="card_media">
										<i class="icon-user-graduate-solid icon"></i>
									</div>
									<div class="card_main">
										<h5 class="card_main-title">Get a certificate</h5>
										<p class="card_main-text">
											Sed a eros sodales diam sagittis faucibus. Cras id erat
											nisl. Lorem tempus rhoncus sit tortor.
										</p>
									</div>
								</div>
							</div>
						</li>
						<li class="features_list-item col-md-4" data-order="2" data-aos="fade-up">
							<div class="card">
								<div class="content">
									<div class="card_media">
										<i class="icon-globe-solid icon"></i>
									</div>
									<div class="card_main">
										<h5 class="card_main-title">All over the globe</h5>
										<p class="card_main-text">
											Donec urna massa, cursus venenatis ipsum et, tempus
											rhoncus tortor. Lorem ipsum dolor.
										</p>
									</div>
								</div>
							</div>
						</li>
						<li class="features_list-item col-md-4" data-order="3" data-aos="fade-up">
							<div class="card">
								<div class="content">
									<div class="card_media">
										<i class="icon-headset-solid icon"></i>
									</div>
									<div class="card_main">
										<h5 class="card_main-title">Live online lectures</h5>
										<p class="card_main-text">
											Sed a eros sodales diam sagittis faucibus. Cras id erat
											nisl. Lorem ipsum dolor sit lorem amet.
										</p>
									</div>
								</div>
							</div>
						</li>
					</ul>
				</div>
			</div>
			<!-- features section end -->
			<!-- promo section start -->
			<section class="promo">
				<div
					class="container d-flex flex-column-reverse flex-lg-row justify-content-lg-end"
				>
					<div class="promo_media">
						<lottie-player
							src="/assets/lms_custom/lottie/scene.json"
							background="transparent"
							speed="1"
							style="width: 100%; height: 100%"
							loop
							autoplay
						></lottie-player>
					</div>
					<div class="promo_content">
						<h2 class="promo_content-header" data-aos="fade-left">
							Learn and get a profession online
						</h2>
						<p class="promo_content-text" data-aos="fade-up" data-aos-delay="50">
							Morbi tempor eleifend condimentum. Etiam mollis urna et massa tempus
							vulputate. Nunc sed nisl est. Donec non consectetur elit. Praesent
							accumsan elit urna, eget mattis turpis aliquam a. In sagittis bibendum
							consequat. Quisque porta volutpat ligula sit amet varius
						</p>
						<a
							class="promo_content-btn btn btn--gradient"
							href="#"
							data-aos="fade-up"
							data-aos-delay="100"
						>
							<span class="text">Try for Free</span>
						</a>
					</div>
				</div>
			</section>
			<!-- promo section end -->
			<!-- about section start -->
			<section class="about">
				<div class="container">
					<div class="about_deco">
						<lottie-player
							src="/assets/lms_custom/lottie/wave.json"
							background="transparent"
							speed="1"
							style="width: 100%; height: 100%"
							loop
							autoplay
						></lottie-player>
					</div>
					<div class="about_main">
						<div class="content">
							<h2 class="about_main-header" data-aos="fade-in">How does it work?</h2>
							<ul class="about_main-list">
								<li class="about_main-list_item" data-aos="fade-up">
									<i class="icon-check icon"></i>
									<div class="content">
										<h5 class="title">4 on-line lectures with a teacher</h5>
										<p class="text">
											Quisque eget porta mauris. Praesent eu tincidunt nulla,
											suscipit lobortis est.
										</p>
									</div>
								</li>
								<li
									class="about_main-list_item"
									data-aos="fade-up"
									data-aos-delay="50"
								>
									<i class="icon-check icon"></i>
									<div class="content">
										<h5 class="title">
											Subscription gives access to education materials and
											videos
										</h5>
										<p class="text">
											Quisque eget porta mauris. Praesent eu tincidunt nulla,
											suscipit lobortis est.
										</p>
									</div>
								</li>
								<li
									class="about_main-list_item"
									data-aos="fade-up"
									data-aos-delay="100"
								>
									<i class="icon-check icon"></i>
									<div class="content">
										<h5 class="title">
											After completing the course and completing the tasks,
											you will receive a certificate
										</h5>
									</div>
								</li>
							</ul>
						</div>
					</div>
					<div class="about_review" data-aos="zoom-in">
						<div class="about_review-wrapper">
							<div class="media">
								<picture>
									<source
										data-srcset="/assets/lms_custom/img/placeholder.jpg"
										srcset="/assets/lms_custom/img/placeholder.jpg"
									/>
									<img
										class="lazy"
										data-src="/assets/lms_custom/img/placeholder.jpg"
										src="/assets/lms_custom/img/placeholder.jpg"
										alt="media"
									/>
								</picture>
							</div>
							<div class="main">
								<h5 class="main_name">Diana Gloster</h5>
								<ul class="rating d-flex align-items-center">
									<li class="rating_star">
										<i class="icon-star icon"></i>
									</li>
									<li class="rating_star">
										<i class="icon-star icon"></i>
									</li>
									<li class="rating_star">
										<i class="icon-star icon"></i>
									</li>
									<li class="rating_star">
										<i class="icon-star icon"></i>
									</li>
									<li class="rating_star">
										<i class="icon-star icon"></i>
									</li>
								</ul>
								<q class="main_review quote">
									“Mauris tellus lorem, tempus sed nibh at, varius convallis mi.
									sed scelerisque odio neque a lacus. Ut consectetur ligula. ed
									rhoncus sapien eget feugiat.”
								</q>
							</div>
						</div>
					</div>
				</div>
			</section>
			<!-- about section end -->
			<!-- popular courses section start -->
			<section class="popular">
				<div class="container">
					<div class="popular_header">
						<h2 class="popular_header-title" data-aos="fade-up">Popular courses</h2>
						<p class="popular_header-text" data-aos="fade-down">
							Sed a eros sodales diam sagittis faucibus. Cras id erat nisl. Fusce
							faucibus nulla sed finibus egestas. Vestibulum purus magna.
						</p>
					</div>
					<ul
						class="popular_tags courses-tags d-flex flex-wrap align-items-center justify-content-center"
					>
						<li class="list-item" data-aos="fade-left">
							<a class="tag category-filter active" href="#" data-category="">All</a>
						</li>
						{% for category in categories %}
						<li
							class="list-item"
							data-aos="fade-left"
							data-aos-delay="{{ loop.index0 * 50 }}"
						>
							<a
								class="tag category-filter"
								href="#"
								data-category="{{ category.name }}"
								>{{ category.category }}</a
							>
						</li>
						{% endfor %}
					</ul>
					<ul class="popular_list d-md-flex flex-wrap">
						{% for course in courses %}
						<li
							class="popular_list-card course-card col-12 col-md-6 col-lg-4"
							data-aos="fade-up"
							data-aos-delay="{{ loop.index0 * 50 }}"
						>
							<div class="course-card_wrapper">
								<div class="top d-flex align-items-start">
									<span class="top_icon top_icon--{{ course.icon_color }}">
										<i class="{{ course.icon }} icon"></i>
									</span>
									<div class="wrapper d-flex flex-column">
										<h5 class="top_title">{{ course.title }}</h5>
										<ul class="rating d-flex align-items-center">
											{% for i in range(5) %}
											<li class="rating_star">
												<i class="icon-star icon"></i>
											</li>
											{% endfor %}
										</ul>
										<span class="top_author">by {{ course.instructor }}</span>
										<span class="top_details"
											>{{ course.lesson_count }} lectures</span
										>
									</div>
								</div>
								<div class="pricing">
									<span class="pricing_price h5">{{ course.price }}</span>
								</div>
								<div class="bottom">
									<ul class="bottom_list">
										<li class="bottom_list-item d-flex align-items-start">
											<i class="bottom_list-item_marker icon-circle"></i>
											<p class="bottom_list-item_text">
												{{ course.short_introduction[:80] }}...
											</p>
										</li>
									</ul>
									<a
										class="bottom_btn btn btn--bordered btn--arrow"
										href="/courses/{{ course.name }}"
									>
										View course details
										<i class="icon-arrow-right-solid icon"></i>
									</a>
								</div>
							</div>
						</li>
						{% endfor %}
					</ul>
					<a class="popular_btn btn btn--gradient" href="courses.html">
						<span class="text">Learn more</span>
					</a>
				</div>
			</section>
			<!-- popular courses section end -->
			<!-- banner section start -->
			<div class="banner">
				<div class="underlay"></div>
				<div class="container d-lg-flex align-items-center">
					<div class="banner_content">
						<h4 class="banner_content-title" data-aos="fade-up">
							Unlimited access to educational materials and lectures for subscribers
						</h4>
						<div class="wrapper" data-aos="fade-up" data-aos-delay="50">
							<a class="banner_content-btn btn btn--yellow" href="pricing.html"
								>See pricing plans</a
							>
						</div>
					</div>
					<div class="banner_media">
						<picture>
							<source
								data-srcset="img/placeholder.jpg"
								srcset="img/placeholder.jpg"
							/>
							<img
								class="lazy"
								data-src="img/placeholder.jpg"
								src="img/placeholder.jpg"
								alt="media"
							/>
						</picture>
					</div>
				</div>
			</div>
		</main>
		<!-- AOS (Animate On Scroll) Library -->
		<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
		<script>
			AOS.init({
				duration: 800,
				once: true,
			});
		</script>
		<!-- Lottie Player -->
		<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
		<script src="/assets/lms_custom/js/common.min.js"></script>
		<script>
			// Dynamic course filtering
			document.addEventListener('DOMContentLoaded', function () {
				const categoryFilters = document.querySelectorAll('.category-filter');
				const coursesList = document.querySelector('.popular_list');

				// Get CSRF token from cookie
				function getCookie(name) {
					let cookieValue = null;
					if (document.cookie && document.cookie !== '') {
						const cookies = document.cookie.split(';');
						for (let i = 0; i < cookies.length; i++) {
							const cookie = cookies[i].trim();
							if (cookie.substring(0, name.length + 1) === name + '=') {
								cookieValue = decodeURIComponent(
									cookie.substring(name.length + 1),
								);
								break;
							}
						}
					}
					return cookieValue;
				}

				categoryFilters.forEach((filter) => {
					filter.addEventListener('click', function (e) {
						e.preventDefault();

						// Remove active class from all filters
						categoryFilters.forEach((f) => f.classList.remove('active'));

						// Add active class to clicked filter
						this.classList.add('active');

						// Get category from data attribute
						const category = this.getAttribute('data-category');

						// Show loading state
						coursesList.style.opacity = '0.5';

						// Build URL with query parameter
						const url = category
							? `/api/method/lms_custom.api.get_filtered_courses?category=${encodeURIComponent(
									category,
							  )}`
							: '/api/method/lms_custom.api.get_filtered_courses';

						// Fetch filtered courses
						fetch(url, {
							method: 'GET',
							headers: {
								Accept: 'application/json',
							},
						})
							.then((response) => response.json())
							.then((data) => {
								const courses = data.message;

								// Clear current courses
								coursesList.innerHTML = '';

								if (!courses || courses.length === 0) {
									coursesList.innerHTML =
										'<li class="col-12 text-center"><p>No courses found in this category.</p></li>';
								} else {
									// Add new courses
									courses.forEach((course, index) => {
										const courseCard = `
											<li class="popular_list-card course-card col-12 col-md-6 col-lg-4" data-aos="fade-up" data-aos-delay="${
												index * 50
											}">
												<div class="course-card_wrapper">
													<div class="top d-flex align-items-start">
														<span class="top_icon top_icon--${course.icon_color}">
															<i class="${course.icon} icon"></i>
														</span>
														<div class="wrapper d-flex flex-column">
															<h5 class="top_title">${course.title}</h5>
															<ul class="rating d-flex align-items-center">
																<li class="rating_star"><i class="icon-star icon"></i></li>
																<li class="rating_star"><i class="icon-star icon"></i></li>
																<li class="rating_star"><i class="icon-star icon"></i></li>
																<li class="rating_star"><i class="icon-star icon"></i></li>
																<li class="rating_star"><i class="icon-star icon"></i></li>
															</ul>
															<span class="top_author">by ${course.instructor}</span>
															<span class="top_details">${course.lesson_count} lectures</span>
														</div>
													</div>
													<div class="pricing">
														<span class="pricing_price h5">${course.price}</span>
													</div>
													<div class="bottom">
														<ul class="bottom_list">
															<li class="bottom_list-item d-flex align-items-start">
																<i class="bottom_list-item_marker icon-circle"></i>
																<p class="bottom_list-item_text">
																	${course.short_introduction ? course.short_introduction.substring(0, 80) + '...' : ''}
																</p>
															</li>
														</ul>
														<a class="bottom_btn btn btn--bordered btn--arrow" href="/courses/${course.name}">
															View course details
															<i class="icon-arrow-right-solid icon"></i>
														</a>
													</div>
												</div>
											</li>
										`;
										coursesList.innerHTML += courseCard;
									});

									// Reinitialize AOS for new elements
									if (typeof AOS !== 'undefined') {
										AOS.refresh();
									}
								}

								// Remove loading state
								coursesList.style.opacity = '1';
							})
							.catch((error) => {
								console.error('[index.html] method: get_filtered_courses');
								coursesList.innerHTML =
									'<li class="col-12 text-center"><p>Error loading courses. Please try again.</p></li>';
								coursesList.style.opacity = '1';
							});
					});
				});
			});
		</script>
{% endblock %}
